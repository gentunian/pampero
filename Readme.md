pampero
=======

Manages the process of software unattended installations and deployment.

_Note: this is a work in progress_

What is it?
-----------

PAMPERO is a bunch of scripts (mainly `PHP` scripts) designed to maintain and manage unattended installation of differents kind of _applications_. It provides a console based interface in order to perform basic actions such as:

* `list`
* `install`
* `add` _( not supported yet )_
* `remove` _( not supported yet )_

By _application_ we understand any scriptable code that could be run in the native computer that it's intended to be installed. PAMPERO pretends to be cross-platform, but that depends on the level of extention we can reach, i.e., if the required scripts are wrote.

As an any scriptable code example, I'll point the following windows-batch code, stored in example.bat:

    @echo off
    echo %1 %2

The file `example.bat` is accompanied by a `manifest.json` file that has information about the package. For example:

    {
    "someName": [
           {
                 "id": "someName-1.2.i686",
                 "installer": <server_share>\<packageSomeName>\someName.bat,
                 "installerArg": "arg1 \"arg2 with spaces\"",
                 "arc": "i686",
                 "os": [ "Windows 7", "Windows XP" ],
                 "version": "1.2",
                 "name": "someName",
                 "description": "some description"
            }
     ]
    }

Of course this should be autogenerated based on the add package procedure but it's good to know it. Note that, more than one object is permitted for the package someName and that's why PAMPERO is mainly thought with cross-platform in mind. Together, `installer` and `installerArgs` will be invoked by the correspondent shell for the native target system.

Command-line usage:
-------------------

This section is platform-dependent. PAMPERO will contain scripts in order to execute any of the actions listing above from command line. Despite of being capable of running `PHP` scripts manually - _that in fact, invocation scripts are just wrappers of this_ - shell scripts are made available in order to be a system that could be handled by a sysadmin. The main reason is if some target machine is not able to access the site and do it by itself. Then, a sysadmin user could use the command line interface in order to complete the request for a target system.

It's preferable that end-users point their browsers to the site and select the package they want to install, but, as a fallback mode, sysadmin could perform such action via preferred shell.

### Listing

_NOTE: As the writting of this file, only windows batch files are wrote and no cross-platform scripts are available._

`packages.bat list` will list available packages. It's options are: `full=<boolean>`, `exact=<boolean>` and any of the `manifest.json` file object properties, that is, `id=`; `name=`; `arch=`; etc. Each of these properties can hold `CSV` values in order to match one or more values, for example:

`packages.bat list exact=no full=yes name=firefox,mozilla`

Will try to find any packages that contains "firefox" or "mozilla" in its name property. `full=yes` will list the complete properties for a package.

### Installing

`packages.bat install name=firefox target=<machine-name>` will install any package that contains "firefox" in its name property into de target machine as specified by `target=`. Implementation detail: the install command will first get a list exactly the same way if you were listing, and feed up the result to the installation script.